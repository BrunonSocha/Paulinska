---
import '../styles/global.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro'; 

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>{title}</title>
	</head>
	<body class="bg-(--cream) antialiased">

		<Header />
		<slot />
		<Footer />

		<script is:inline>
			const header = document.getElementById('main-header');
			const heroSection = document.getElementById('hero-section');
			
			if (heroSection) {
				const aboutSection = document.getElementById('about');
				if (header && aboutSection) {
					const headerTriggerPoint = heroSection.clientHeight * 0.95; 
					const snapTriggerPoint = heroSection.clientHeight * 0.15; 
					
					let isScrolling = false;
					let lastScrollY = window.scrollY;

					window.addEventListener('scroll', () => {
						const currentScrollY = window.scrollY;

						if (currentScrollY > headerTriggerPoint) { 
							header.classList.add('scrolled');
						} else {
							header.classList.remove('scrolled');
						}

						if (!isScrolling) {
							if (currentScrollY > lastScrollY && currentScrollY < heroSection.clientHeight) {
								if (currentScrollY > snapTriggerPoint) {
									isScrolling = true; 
									window.scrollTo({
										top: aboutSection.offsetTop,
										behavior: 'smooth'
									});
									setTimeout(() => { isScrolling = false; }, 800);
								}
							}
						}
						lastScrollY = currentScrollY;
					});
				}
			} else if (header) {
				window.addEventListener('load', () => {
					header.classList.add('scrolled');
				});
			}
		</script>
	</body>
</html>